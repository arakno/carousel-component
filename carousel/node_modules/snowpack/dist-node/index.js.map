{"version":3,"file":"index.js","sources":["../dist-src/config.js","../dist-src/util.js","../dist-src/rollup-plugin-entrypoint-alias.js","../dist-src/rollup-plugin-stats.js","../dist-src/rollup-plugin-treeshake-inputs.js","../dist-src/scan-imports.js","../dist-src/stats-formatter.js","../dist-src/index.js"],"sourcesContent":["import path from 'path';\nimport { cosmiconfigSync } from 'cosmiconfig';\nimport { validate } from 'jsonschema';\nimport merge from 'deepmerge';\n// default settings\nconst DEFAULT_CONFIG = {\n    dedupe: [],\n    installOptions: {\n        clean: false,\n        hash: false,\n        dest: 'web_modules',\n        exclude: ['**/__tests__/*', '**/*.@(spec|test).@(js|mjs)'],\n        externalPackage: [],\n        nomoduleOutput: 'app.nomodule.js',\n        optimize: false,\n        remoteUrl: 'https://cdn.pika.dev',\n        stat: false,\n        strict: false,\n    },\n    rollup: { plugins: [] },\n};\nconst configSchema = {\n    type: 'object',\n    properties: {\n        source: { type: 'string' },\n        dependencies: { type: 'object' },\n        webDependencies: { type: 'array', items: { type: 'string' } },\n        dedupe: {\n            type: 'array',\n            items: { type: 'string' },\n        },\n        namedExports: {\n            type: 'object',\n            additionalProperties: { type: 'array', items: { type: 'string' } },\n        },\n        installOptions: {\n            type: 'object',\n            properties: {\n                babel: { type: 'boolean' },\n                hash: { type: 'boolean' },\n                clean: { type: 'boolean' },\n                dest: { type: 'string' },\n                exclude: { type: 'array', items: { type: 'string' } },\n                externalPackage: { type: 'array', items: { type: 'string' } },\n                include: { type: 'string' },\n                nomodule: { type: 'string' },\n                nomoduleOutput: { type: 'string' },\n                optimize: { type: 'boolean' },\n                remotePackage: { type: 'array', items: { type: 'string' } },\n                remoteUrl: { type: 'string' },\n                sourceMap: { oneOf: [{ type: 'boolean' }, { type: 'string' }] },\n                stat: { type: 'boolean' },\n                strict: { type: 'boolean' },\n            },\n        },\n        rollup: {\n            type: 'object',\n            properties: {\n                plugins: { type: 'array', items: { type: 'object' } },\n            },\n        },\n    },\n};\nfunction expandCliFlags(flags) {\n    const { help, version, ...installOptions } = flags;\n    return {\n        installOptions,\n    };\n}\n/** resolve --dest relative to cwd */\nfunction normalizeDest(config) {\n    config.installOptions.dest = path.resolve(process.cwd(), config.installOptions.dest);\n    return config;\n}\nexport default function loadConfig(flags) {\n    const cliConfig = expandCliFlags(flags);\n    const explorerSync = cosmiconfigSync('snowpack', {\n        // only support these 3 types of config for now\n        searchPlaces: ['package.json', 'snowpack.config.js', 'snowpack.config.json'],\n        // don't support crawling up the folder tree:\n        stopDir: path.dirname(process.cwd()),\n    });\n    const result = explorerSync.search(); // search for snowpack config\n    // user has no config\n    if (!result || !result.config || result.isEmpty) {\n        // if CLI flags present, apply those as overrides\n        return {\n            config: normalizeDest(merge(DEFAULT_CONFIG, cliConfig)),\n            errors: [],\n        };\n    }\n    const config = result.config;\n    // validate against schema; throw helpful user if invalid\n    const validation = validate(config, configSchema, {\n        allowUnknownAttributes: false,\n        propertyName: 'snowpack',\n    });\n    // if valid, apply config over defaults\n    const mergedConfig = merge(DEFAULT_CONFIG, config);\n    // if CLI flags present, apply those as overrides\n    return {\n        config: normalizeDest(merge(mergedConfig, cliConfig)),\n        errors: validation.errors.map(msg => `${path.basename(result.filepath)}: ${msg.toString()}`),\n    };\n}\n","import fs from 'fs';\nimport path from 'path';\nexport function isTruthy(item) {\n    return Boolean(item);\n}\n/**\n * Given a package name, look for that package's package.json manifest.\n * Return both the manifest location (if believed to exist) and the\n * manifest itself (if found).\n *\n * NOTE: You used to be able to require() a package.json file directly,\n * but now with export map support in Node v13 that's no longer possible.\n */\nexport function resolveDependencyManifest(dep, cwd) {\n    // Attempt #1: Resolve the dependency manifest normally. This works for most\n    // packages, but fails when the package defines an export map that doesn't\n    // include a package.json. If we detect that to be the reason for failure,\n    // move on to our custom implementation.\n    try {\n        const depManifest = require.resolve(`${dep}/package.json`, { paths: [cwd] });\n        return [depManifest, require(depManifest)];\n    }\n    catch (err) {\n        if (err.code === 'MODULE_NOT_FOUND' && err.message.includes(`'./package.json'`)) {\n            // its most likely an export map issue, move on to our manual resolver.\n        }\n        else {\n            throw err;\n        }\n    }\n    // Attempt #2: Resolve the dependency manifest manually. This involves resolving\n    // the dep itself to find the entrypoint file, and then haphazardly replacing the\n    // file path within the package with a \"./package.json\" instead. It's not as\n    // thorough as Attempt #1, but it should work well until export maps become more\n    // established & move out of experimental mode.\n    let result = [null, null];\n    try {\n        const fullPath = require.resolve(dep, { paths: [cwd] });\n        // Strip everything after the package name to get the package root path\n        // NOTE: This find-replace is very gross, replace with something like upath.\n        const searchPath = `${path.sep}node_modules${path.sep}${dep.replace('/', path.sep)}`;\n        const indexOfSearch = fullPath.lastIndexOf(searchPath);\n        if (indexOfSearch >= 0) {\n            const manifestPath = fullPath.substring(0, indexOfSearch + searchPath.length + 1) + 'package.json';\n            result[0] = manifestPath;\n            const manifestStr = fs.readFileSync(manifestPath, { encoding: 'utf8' });\n            result[1] = JSON.parse(manifestStr);\n        }\n    }\n    catch (err) {\n        // ignore\n    }\n    finally {\n        return result;\n    }\n}\n/**\n * If Rollup erred parsing a particular file, show suggestions based on its\n * file extension (note: lowercase is fine).\n */\nexport const MISSING_PLUGIN_SUGGESTIONS = {\n    '.css': 'Try installing rollup-plugin-postcss and adding it to Snowpack (https://www.snowpack.dev/#custom-rollup-plugins)',\n    '.svelte': 'Try installing rollup-plugin-svelte and adding it to Snowpack (https://www.snowpack.dev/#custom-rollup-plugins)',\n    '.vue': 'Try installing rollup-plugin-vue and adding it to Snowpack (https://www.snowpack.dev/#custom-rollup-plugins)',\n};\n","import path from 'path';\nimport { resolveDependencyManifest } from './util';\nconst IS_DEEP_PACKAGE_IMPORT = /^(@[\\w-]+\\/)?([\\w-]+)\\/(.*)/;\n/**\n * rollup-plugin-entrypoint-alias\n *\n * Aliases any deep imports from a package to the package name, so that\n * chunking can happen more accurately.\n *\n * Example: lit-element imports from both 'lit-html' & 'lit-html/lit-html.js'.\n * Even though both eventually resolve to the same place, without this plugin\n * we lose the ability to mark \"lit-html\" as an external package.\n */\nexport function rollupPluginEntrypointAlias({ cwd }) {\n    return {\n        name: 'snowpack:rollup-plugin-entrypoint-alias',\n        resolveId(source, importer) {\n            if (!IS_DEEP_PACKAGE_IMPORT.test(source)) {\n                return null;\n            }\n            const [, packageScope, packageName] = source.match(IS_DEEP_PACKAGE_IMPORT);\n            const packageFullName = packageScope ? `${packageScope}${packageName}` : packageName;\n            const [, manifest] = resolveDependencyManifest(packageFullName, cwd);\n            if (!manifest) {\n                return null;\n            }\n            let needsAlias = (typeof manifest.module === 'string' &&\n                source === path.posix.join(packageFullName, manifest.module)) ||\n                (typeof manifest.browser === 'string' &&\n                    source === path.posix.join(packageFullName, manifest.browser)) ||\n                (typeof manifest.main === 'string' &&\n                    source === path.posix.join(packageFullName, manifest.main));\n            if (!needsAlias) {\n                return null;\n            }\n            return this.resolve(packageFullName, importer, { skipSelf: true }).then(resolved => {\n                return resolved || null;\n            });\n        },\n    };\n}\n","import fs from 'fs';\nimport path from 'path';\nimport zlib from 'zlib';\nexport function rollupPluginDependencyStats(cb) {\n    let outputDir;\n    let existingFileCache = {};\n    let statsSummary = {\n        direct: {},\n        common: {},\n    };\n    function buildExistingFileCache(bundle) {\n        for (let fileName of Object.keys(bundle)) {\n            const filePath = path.join(outputDir, fileName);\n            if (fs.existsSync(filePath)) {\n                const { size } = fs.statSync(filePath);\n                existingFileCache[fileName] = size;\n            }\n        }\n    }\n    function compareDependencies(files, type) {\n        for (let { fileName, contents } of files) {\n            const size = contents.byteLength;\n            statsSummary[type][fileName] = {\n                size: size,\n                gzip: zlib.gzipSync(contents).byteLength,\n                brotli: zlib.brotliCompressSync(contents).byteLength,\n            };\n            if (existingFileCache[fileName]) {\n                const delta = (size - existingFileCache[fileName]) / 1000;\n                statsSummary[type][fileName].delta = delta;\n            }\n        }\n    }\n    return {\n        generateBundle(options, bundle) {\n            outputDir = options.dir;\n            buildExistingFileCache(bundle);\n        },\n        writeBundle(bundle) {\n            const directDependencies = [];\n            const commonDependencies = [];\n            for (const [fileName, assetOrChunk] of Object.entries(bundle)) {\n                const raw = assetOrChunk.type === 'asset' ? assetOrChunk.source : assetOrChunk.code;\n                const contents = Buffer.isBuffer(raw) ? raw : Buffer.from(raw, 'utf8');\n                if (fileName.startsWith('common')) {\n                    commonDependencies.push({ fileName, contents });\n                }\n                else {\n                    directDependencies.push({ fileName, contents });\n                }\n            }\n            compareDependencies(directDependencies, 'direct');\n            compareDependencies(commonDependencies, 'common');\n            cb(statsSummary);\n        },\n    };\n}\n","import path from 'path';\n/**\n * rollup-plugin-treeshake-inputs\n *\n * How it works:\n * 1. An array of \"install targets\" are passed in, describing all known imports + metadata.\n * 2. Known imports are marked for tree-shaking by appending 'pika-treeshake:' to the input value.\n * 3. On load, we return a false virtual file for all \"pika-treeshake:\" inputs.\n *    a. That virtual file contains only `export ... from 'ACTUAL_FILE_PATH';` exports\n *    b. Rollup uses those exports to drive its tree-shaking algorithm.\n */\nexport function rollupPluginTreeshakeInputs(allImports) {\n    const installTargetsByFile = {};\n    return {\n        name: 'snowpack:treeshake-inputs',\n        // Mark some inputs for tree-shaking.\n        options(inputOptions) {\n            const input = inputOptions.input;\n            for (const [key, val] of Object.entries(input)) {\n                installTargetsByFile[val] = allImports.filter(imp => imp.specifier === key);\n                // If an input has known install targets, and none of those have \"all=true\", mark for treeshaking.\n                if (installTargetsByFile[val].length > 0 &&\n                    !installTargetsByFile[val].some(imp => imp.all)) {\n                    input[key] = `pika-treeshake:${val}`;\n                }\n            }\n            return inputOptions;\n        },\n        resolveId(source) {\n            if (source.startsWith('pika-treeshake:')) {\n                return source;\n            }\n            return null;\n        },\n        load(id) {\n            if (!id.startsWith('pika-treeshake:')) {\n                return null;\n            }\n            const fileLoc = id.substring('pika-treeshake:'.length);\n            // Reduce all install targets into a single \"summarized\" install target.\n            const treeshakeSummary = installTargetsByFile[fileLoc].reduce((summary, imp) => {\n                summary.default = summary.default || imp.default;\n                summary.namespace = summary.namespace || imp.namespace;\n                summary.named = [...summary.named, ...imp.named];\n                return summary;\n            });\n            const uniqueNamedImports = new Set(treeshakeSummary.named);\n            const normalizedFileLoc = fileLoc.split(path.win32.sep).join(path.posix.sep);\n            const result = `\n        ${treeshakeSummary.namespace ? `export * from '${normalizedFileLoc}';` : ''}\n        ${treeshakeSummary.default\n                ? `import __pika_web_default_export_for_treeshaking__ from '${normalizedFileLoc}'; export default __pika_web_default_export_for_treeshaking__;`\n                : ''}\n        ${`export {${[...uniqueNamedImports].join(',')}} from '${normalizedFileLoc}';`}\n      `;\n            return result;\n        },\n    };\n}\n","import nodePath from 'path';\nimport fs from 'fs';\nimport glob from 'glob';\nimport validatePackageName from 'validate-npm-package-name';\nimport { init as initESModuleLexer, parse } from 'es-module-lexer';\nimport { isTruthy } from './util';\nconst WEB_MODULES_TOKEN = 'web_modules/';\nconst WEB_MODULES_TOKEN_LENGTH = WEB_MODULES_TOKEN.length;\n// [@\\w] - Match a word-character or @ (valid package name)\n// (?!.*(:\\/\\/)) - Ignore if previous match was a protocol (ex: http://)\nconst BARE_SPECIFIER_REGEX = /^[@\\w](?!.*(:\\/\\/))/;\nconst HAS_NAMED_IMPORTS_REGEX = /^[\\w\\s\\,]*\\{(.*)\\}/s;\nconst SPLIT_NAMED_IMPORTS_REGEX = /\\bas\\s+\\w+|,/s;\nconst DEFAULT_IMPORT_REGEX = /import\\s+(\\w)+(,\\s\\{[\\w\\s]*\\})?\\s+from/s;\nfunction stripJsExtension(dep) {\n    return dep.replace(/\\.m?js$/i, '');\n}\nfunction createInstallTarget(specifier, all = true) {\n    return {\n        specifier,\n        all,\n        default: false,\n        namespace: false,\n        named: [],\n    };\n}\nfunction removeSpecifierQueryString(specifier) {\n    const queryStringIndex = specifier.indexOf('?');\n    if (queryStringIndex >= 0) {\n        specifier = specifier.substring(0, queryStringIndex);\n    }\n    return specifier;\n}\nfunction getWebModuleSpecifierFromCode(code, imp) {\n    if (imp.d > -1) {\n        return code.substring(imp.s + 1, imp.e - 1);\n    }\n    return code.substring(imp.s, imp.e);\n}\n/**\n * parses an import specifier, looking for a web modules to install. If a web module is not detected,\n * null is returned.\n */\nfunction parseWebModuleSpecifier(specifier) {\n    // If specifier is a \"bare module specifier\" (ie: package name) just return it directly\n    if (BARE_SPECIFIER_REGEX.test(specifier)) {\n        return specifier;\n    }\n    // Clean the specifier, remove any query params that may mess with matching\n    const cleanedSpecifier = removeSpecifierQueryString(specifier);\n    // Otherwise, check that it includes the \"web_modules/\" directory\n    const webModulesIndex = cleanedSpecifier.indexOf(WEB_MODULES_TOKEN);\n    if (webModulesIndex === -1) {\n        return null;\n    }\n    // Check if this matches `@scope/package.js` or `package.js` format.\n    // If it is, assume that this is a top-level pcakage that should be installed without the “.js”\n    const resolvedSpecifier = cleanedSpecifier.substring(webModulesIndex + WEB_MODULES_TOKEN_LENGTH);\n    const resolvedSpecifierWithoutExtension = stripJsExtension(resolvedSpecifier);\n    if (validatePackageName(resolvedSpecifierWithoutExtension).validForNewPackages) {\n        return resolvedSpecifierWithoutExtension;\n    }\n    // Otherwise, this is an explicit import to a file within a package.\n    return resolvedSpecifier;\n}\nfunction parseImportStatement(code, imp) {\n    const webModuleSpecifier = parseWebModuleSpecifier(getWebModuleSpecifierFromCode(code, imp));\n    if (!webModuleSpecifier) {\n        return null;\n    }\n    const importStatement = code.substring(imp.ss, imp.se);\n    const dynamicImport = imp.d > -1;\n    const defaultImport = !dynamicImport && DEFAULT_IMPORT_REGEX.test(importStatement);\n    const namespaceImport = !dynamicImport && importStatement.includes('*');\n    const namedImports = (importStatement.match(HAS_NAMED_IMPORTS_REGEX) || [, ''])[1]\n        .split(SPLIT_NAMED_IMPORTS_REGEX)\n        .map(name => name.trim())\n        .filter(isTruthy);\n    return {\n        specifier: webModuleSpecifier,\n        all: dynamicImport,\n        default: defaultImport,\n        namespace: namespaceImport,\n        named: namedImports,\n    };\n}\nfunction getInstallTargetsForFile(filePath, code) {\n    const [imports] = parse(code) || [];\n    const allImports = imports\n        .map(imp => parseImportStatement(code, imp))\n        .filter(isTruthy);\n    return allImports;\n}\nexport function scanDepList(depList, cwd) {\n    const nodeModulesLoc = nodePath.join(cwd, 'node_modules');\n    return depList\n        .map(whitelistItem => {\n        if (!glob.hasMagic(whitelistItem)) {\n            return [createInstallTarget(whitelistItem, true)];\n        }\n        else {\n            return scanDepList(glob.sync(whitelistItem, { cwd: nodeModulesLoc, nodir: true }), cwd);\n        }\n    })\n        .reduce((flat, item) => flat.concat(item), []);\n}\nexport async function scanImports({ include, exclude }) {\n    await initESModuleLexer;\n    const includeFiles = glob.sync(include, { ignore: exclude, nodir: true });\n    if (!includeFiles.length) {\n        console.warn(`[SCAN ERROR]: No files matching \"${include}\"`);\n        return [];\n    }\n    // Scan every matched JS file for web dependency imports\n    return includeFiles\n        .filter(filePath => filePath.endsWith('.js') || filePath.endsWith('mjs'))\n        .map(filePath => [filePath, fs.readFileSync(filePath, 'utf8')])\n        .map(([filePath, code]) => getInstallTargetsForFile(filePath, code))\n        .reduce((flat, item) => flat.concat(item), [])\n        .sort((impA, impB) => impA.specifier.localeCompare(impB.specifier));\n}\n","import chalk from 'chalk';\n/** The minimum width, in characters, of each size column */\nconst SIZE_COLUMN_WIDTH = 11;\n/** Generic Object.entries() alphabetical sort by keys. */\nfunction entriesSort([filenameA], [filenameB]) {\n    return filenameA.localeCompare(filenameB);\n}\n/** Pretty-prints number of bytes as \"XXX KB\" */\nfunction formatSize(size) {\n    let kb = Math.round((size / 1000) * 100) / 100;\n    if (kb >= 1000) {\n        kb = Math.floor(kb);\n    }\n    let color;\n    if (kb < 15) {\n        color = 'green';\n    }\n    else if (kb < 30) {\n        color = 'yellow';\n    }\n    else {\n        color = 'red';\n    }\n    return chalk[color](`${kb} KB`.padEnd(SIZE_COLUMN_WIDTH));\n}\nfunction formatDelta(delta) {\n    const kb = Math.round(delta * 100) / 100;\n    const color = delta > 0 ? 'red' : 'green';\n    return chalk[color](`Δ ${delta > 0 ? '+' : ''}${kb} KB`);\n}\nfunction formatFileInfo(filename, stats, padEnd, isLastFile) {\n    const lineGlyph = chalk.dim(isLastFile ? '└─' : '├─');\n    const lineName = filename.padEnd(padEnd);\n    const fileStat = formatSize(stats.size);\n    const gzipStat = formatSize(stats.gzip);\n    const brotliStat = formatSize(stats.brotli);\n    const lineStat = fileStat + gzipStat + brotliStat;\n    let lineDelta = '';\n    if (stats.delta) {\n        lineDelta = chalk.dim('[') + formatDelta(stats.delta) + chalk.dim(']');\n    }\n    // Trim trailing whitespace (can mess with formatting), but keep indentation.\n    return `    ` + `${lineGlyph} ${lineName} ${lineStat} ${lineDelta}`.trim();\n}\nfunction formatFiles(files, padEnd) {\n    const strippedFiles = files.map(([filename, stats]) => [\n        filename.replace(/^common\\//, ''),\n        stats,\n    ]);\n    return strippedFiles\n        .map(([filename, stats], index) => formatFileInfo(filename, stats, padEnd, index >= files.length - 1))\n        .join('\\n');\n}\nexport function printStats(dependencyStats) {\n    let output = '';\n    const { direct, common } = dependencyStats;\n    const allDirect = Object.entries(direct).sort(entriesSort);\n    const allCommon = Object.entries(common).sort(entriesSort);\n    const maxFileNameLength = [...allCommon, ...allDirect].reduce((max, [filename]) => Math.max(filename.length, max), 'web_modules/'.length) + 1;\n    output +=\n        `  ⦿ ${chalk.bold('web_modules/'.padEnd(maxFileNameLength + 4))}` +\n            chalk.bold.underline('size'.padEnd(SIZE_COLUMN_WIDTH - 2)) +\n            '  ' +\n            chalk.bold.underline('gzip'.padEnd(SIZE_COLUMN_WIDTH - 2)) +\n            '  ' +\n            chalk.bold.underline('brotli'.padEnd(SIZE_COLUMN_WIDTH - 2)) +\n            `\\n`;\n    output += `${formatFiles(allDirect, maxFileNameLength)}\\n`;\n    if (Object.values(common).length > 0) {\n        output += `  ⦿ ${chalk.bold('web_modules/common/ (Shared)')}\\n`;\n        output += `${formatFiles(allCommon, maxFileNameLength)}\\n`;\n    }\n    return `\\n${output}\\n`;\n}\n","import babelPresetEnv from '@babel/preset-env';\nimport rollupPluginCommonjs from '@rollup/plugin-commonjs';\nimport rollupPluginJson from '@rollup/plugin-json';\nimport rollupPluginNodeResolve from '@rollup/plugin-node-resolve';\nimport rollupPluginReplace from '@rollup/plugin-replace';\nimport chalk from 'chalk';\nimport fs from 'fs';\nimport hasha from 'hasha';\nimport isNodeBuiltin from 'is-builtin-module';\nimport mkdirp from 'mkdirp';\nimport ora from 'ora';\nimport path from 'path';\nimport rimraf from 'rimraf';\nimport { rollup } from 'rollup';\nimport rollupPluginBabel from 'rollup-plugin-babel';\nimport { terser as rollupPluginTerser } from 'rollup-plugin-terser';\nimport validatePackageName from 'validate-npm-package-name';\nimport yargs from 'yargs-parser';\nimport loadConfig from './config.js';\nimport { rollupPluginEntrypointAlias } from './rollup-plugin-entrypoint-alias.js';\nimport { rollupPluginDependencyStats } from './rollup-plugin-stats.js';\nimport { rollupPluginTreeshakeInputs } from './rollup-plugin-treeshake-inputs.js';\nimport { scanDepList, scanImports } from './scan-imports.js';\nimport { printStats } from './stats-formatter.js';\nimport { isTruthy, MISSING_PLUGIN_SUGGESTIONS, resolveDependencyManifest } from './util.js';\nconst ALWAYS_SHOW_ERRORS = new Set(['react', 'react-dom']);\nconst cwd = process.cwd();\nconst banner = chalk.bold(`snowpack`) + ` installing... `;\nconst installResults = [];\nlet dependencyStats = null;\nlet spinner = ora(banner);\nlet spinnerHasError = false;\nfunction printHelp() {\n    console.log(`\n${chalk.bold(`snowpack`)} - Install npm dependencies to run natively on the web.\n${chalk.bold('Options:')}\n  --dest [path]             Specify destination directory (default: \"web_modules/\").\n  --clean                   Clear out the destination directory before install.\n  --optimize                Transpile, minify, and optimize installed dependencies for production.\n  --babel                   Transpile installed dependencies. Also enabled with \"--optimize\".\n  --include [glob]          Auto-detect imports from file(s). Supports glob.\n  --exclude [glob]          Exclude files from --include. Follows glob’s ignore pattern.\n  --strict                  Only install pure ESM dependency trees. Fail if a CJS module is encountered.\n  --no-source-map           Skip emitting source map files (.js.map) into dest\n  --stat                    Logs install statistics after installing, with information on install targets and file sizes. Useful for CI, performance review.\n  --nomodule [path]         Your app’s entry file for generating a <script nomodule> bundle\n  --nomodule-output [path]  Filename for nomodule output (default: 'app.nomodule.js')\n    ${chalk.bold('Advanced:')}\n  --external-package [val]  Internal use only, may be removed at any time.\n    `.trim());\n}\nasync function generateHashFromFile(targetLoc) {\n    var _a;\n    const longHash = await hasha.fromFile(targetLoc, { algorithm: 'md5' });\n    return (_a = longHash) === null || _a === void 0 ? void 0 : _a.slice(0, 10);\n}\nfunction formatInstallResults(skipFailures) {\n    return installResults\n        .map(([d, result]) => {\n        if (result === 'SUCCESS') {\n            return chalk.green(d);\n        }\n        if (result === 'ASSET') {\n            return chalk.yellow(d);\n        }\n        if (result === 'FAIL') {\n            return skipFailures ? chalk.dim(d) : chalk.red(d);\n        }\n        return d;\n    })\n        .join(', ');\n}\nfunction logError(msg) {\n    if (!spinnerHasError) {\n        spinner.stopAndPersist({ symbol: chalk.cyan('⠼') });\n    }\n    spinnerHasError = true;\n    spinner = ora(chalk.red(msg));\n    spinner.fail();\n}\nclass ErrorWithHint extends Error {\n    constructor(message, hint) {\n        super(message);\n        this.hint = hint;\n    }\n}\n// Add common, well-used non-esm packages here so that Rollup doesn't die trying to analyze them.\nconst PACKAGES_TO_AUTO_DETECT_EXPORTS = [\n    path.join('react', 'index.js'),\n    path.join('react-dom', 'index.js'),\n    path.join('react-is', 'index.js'),\n    path.join('prop-types', 'index.js'),\n    path.join('scheduler', 'index.js'),\n    path.join('rxjs', 'Rx.js'),\n];\nfunction detectExports(filePath) {\n    try {\n        const fileLoc = require.resolve(filePath, { paths: [cwd] });\n        if (fs.existsSync(fileLoc)) {\n            return Object.keys(require(fileLoc)).filter(e => e[0] !== '_');\n        }\n    }\n    catch (err) {\n        // ignore\n    }\n}\n/**\n * Resolve a \"webDependencies\" input value to the correct absolute file location.\n * Supports both npm package names, and file paths relative to the node_modules directory.\n * Follows logic similar to Node's resolution logic, but using a package.json's ESM \"module\"\n * field instead of the CJS \"main\" field.\n */\nfunction resolveWebDependency(dep, isExplicit) {\n    // if dep includes a file extension, check that dep isn't a package before returning\n    if (path.extname(dep) && !validatePackageName(dep).validForNewPackages) {\n        const isJSFile = ['.js', '.mjs', '.cjs'].includes(path.extname(dep));\n        return {\n            type: isJSFile ? 'JS' : 'ASSET',\n            loc: require.resolve(dep, { paths: [cwd] }),\n        };\n    }\n    const [depManifestLoc, depManifest] = resolveDependencyManifest(dep, cwd);\n    if (!depManifest) {\n        throw new ErrorWithHint(`\"${dep}\" not found. Have you installed the package via npm?`, depManifestLoc && chalk.italic(depManifestLoc));\n    }\n    let foundEntrypoint = depManifest['browser:module'] ||\n        depManifest.module ||\n        depManifest['main:esnext'] ||\n        depManifest.browser;\n    // Some packages define \"browser\" as an object. We'll do our best to find the\n    // right entrypoint in an entrypoint object, or fail otherwise.\n    // See: https://github.com/defunctzombie/package-browser-field-spec\n    if (typeof foundEntrypoint === 'object') {\n        foundEntrypoint =\n            foundEntrypoint[dep] ||\n                foundEntrypoint['./index.js'] ||\n                foundEntrypoint['./index'] ||\n                foundEntrypoint['./'] ||\n                foundEntrypoint['.'] ||\n                foundEntrypoint;\n    }\n    // If the package was a part of the explicit whitelist, fallback to it's main CJS entrypoint.\n    if (!foundEntrypoint && isExplicit) {\n        foundEntrypoint = depManifest.main || 'index.js';\n    }\n    if ((dep === 'react' || dep === 'react-dom') &&\n        (!foundEntrypoint || foundEntrypoint === 'index.js')) {\n        throw new ErrorWithHint(chalk.bold(`Dependency \"${dep}\" has no native \"module\" entrypoint.`) +\n            `\n  To continue, install our drop-in, ESM-ready builds of \"react\" & \"react-dom\" to your project:\n    npm: npm install react@npm:@pika/react react-dom@npm:@pika/react-dom\n    yarn: yarn add react@npm:@pika/react react-dom@npm:@pika/react-dom`, chalk.italic(`See ${chalk.underline('https://www.snowpack.dev/#react')} for more info.`));\n    }\n    if (!foundEntrypoint) {\n        throw new ErrorWithHint(`dependency \"${dep}\" has no native \"module\" entrypoint.`, chalk.italic(`Tip: Find modern, web-ready packages at ${chalk.underline('https://www.pika.dev')}`));\n    }\n    if (typeof foundEntrypoint !== 'string') {\n        throw new Error(`\"${dep}\" has unexpected entrypoint: ${JSON.stringify(foundEntrypoint)}.`);\n    }\n    return {\n        type: 'JS',\n        loc: path.join(depManifestLoc, '..', foundEntrypoint),\n    };\n}\n/**\n * Formats the snowpack dependency name from a \"webDependencies\" input value:\n * 2. Remove any \".js\"/\".mjs\" extension (will be added automatically by Rollup)\n */\nfunction getWebDependencyName(dep) {\n    return dep.replace(/\\.m?js$/i, '');\n}\nexport async function install(installTargets, { hasBrowserlistConfig, isExplicit }, config) {\n    const { dedupe, namedExports, installOptions: { babel: isBabel, dest: destLoc, hash: useHash, externalPackage: externalPackages, nomodule, nomoduleOutput, optimize: isOptimized, sourceMap, strict: isStrict, stat: withStats, }, rollup: userDefinedRollup, } = config;\n    const knownNamedExports = { ...namedExports };\n    for (const filePath of PACKAGES_TO_AUTO_DETECT_EXPORTS) {\n        knownNamedExports[filePath] = knownNamedExports[filePath] || detectExports(filePath) || [];\n    }\n    if (!fs.existsSync(path.join(cwd, 'node_modules'))) {\n        logError('no \"node_modules\" directory exists. Did you run \"npm install\" first?');\n        return;\n    }\n    const allInstallSpecifiers = new Set(installTargets.map(dep => dep.specifier));\n    const installEntrypoints = {};\n    const assetEntrypoints = {};\n    const importMap = {};\n    const installTargetsMap = {};\n    const skipFailures = !isExplicit;\n    for (const installSpecifier of allInstallSpecifiers) {\n        const targetName = getWebDependencyName(installSpecifier);\n        try {\n            const { type: targetType, loc: targetLoc } = resolveWebDependency(installSpecifier, isExplicit);\n            if (targetType === 'JS') {\n                const hashQs = useHash ? `?rev=${await generateHashFromFile(targetLoc)}` : '';\n                installEntrypoints[targetName] = targetLoc;\n                importMap[installSpecifier] = `./${targetName}.js${hashQs}`;\n                installTargetsMap[targetLoc] = installTargets.filter(t => installSpecifier === t.specifier);\n                installResults.push([installSpecifier, 'SUCCESS']);\n            }\n            else if (targetType === 'ASSET') {\n                assetEntrypoints[targetName] = targetLoc;\n                installResults.push([installSpecifier, 'ASSET']);\n            }\n            spinner.text = banner + formatInstallResults(skipFailures);\n        }\n        catch (err) {\n            installResults.push([installSpecifier, 'FAIL']);\n            spinner.text = banner + formatInstallResults(skipFailures);\n            if (skipFailures && !ALWAYS_SHOW_ERRORS.has(installSpecifier)) {\n                continue;\n            }\n            // An error occurred! Log it.\n            logError(err.message || err);\n            if (err.hint) {\n                // Note: Wait 1ms to guarantee a log message after the spinner\n                setTimeout(() => console.log(err.hint), 1);\n            }\n            return false;\n        }\n    }\n    if (Object.keys(installEntrypoints).length === 0 && Object.keys(assetEntrypoints).length === 0) {\n        logError(`No ESM dependencies found!`);\n        console.log(chalk.dim(`  At least one dependency must have an ESM \"module\" entrypoint. You can find modern, web-ready packages at ${chalk.underline('https://www.pika.dev')}`));\n        return false;\n    }\n    const inputOptions = {\n        input: installEntrypoints,\n        external: externalPackages,\n        plugins: [\n            rollupPluginEntrypointAlias({ cwd }),\n            !isStrict &&\n                rollupPluginReplace({\n                    'process.env.NODE_ENV': isOptimized ? '\"production\"' : '\"development\"',\n                }),\n            rollupPluginNodeResolve({\n                mainFields: ['browser:module', 'module', 'browser', !isStrict && 'main'].filter(isTruthy),\n                modulesOnly: isStrict,\n                extensions: ['.mjs', '.cjs', '.js', '.json'],\n                // whether to prefer built-in modules (e.g. `fs`, `path`) or local ones with the same names\n                preferBuiltins: false,\n                dedupe,\n            }),\n            !isStrict &&\n                rollupPluginJson({\n                    preferConst: true,\n                    indent: '  ',\n                    compact: isOptimized,\n                    namedExports: true,\n                }),\n            !isStrict &&\n                rollupPluginCommonjs({\n                    extensions: ['.js', '.cjs'],\n                    namedExports: knownNamedExports,\n                }),\n            !!isBabel &&\n                rollupPluginBabel({\n                    compact: false,\n                    babelrc: false,\n                    configFile: false,\n                    presets: [\n                        [\n                            babelPresetEnv,\n                            {\n                                modules: false,\n                                targets: hasBrowserlistConfig\n                                    ? undefined\n                                    : '>0.75%, not ie 11, not UCAndroid >0, not OperaMini all',\n                            },\n                        ],\n                    ],\n                }),\n            !!isOptimized && rollupPluginTreeshakeInputs(installTargets),\n            !!isOptimized && rollupPluginTerser(),\n            !!withStats && rollupPluginDependencyStats(info => (dependencyStats = info)),\n            ...userDefinedRollup.plugins,\n        ],\n        onwarn(warning, warn) {\n            if (warning.code === 'UNRESOLVED_IMPORT') {\n                logError(`'${warning.source}' is imported by '${warning.importer}', but could not be resolved.`);\n                if (isNodeBuiltin(warning.source)) {\n                    console.log(chalk.dim(`  '${warning.source}' is a Node.js builtin module that won't exist in the browser.`));\n                    console.log(chalk.dim(`  Find a more web-friendly alternative, or add the \"rollup-plugin-node-polyfills\" plugin to your Snowpack config file.`));\n                }\n                else {\n                    console.log(chalk.dim(`  Make sure that the package is installed and that the file exists.`));\n                }\n                return;\n            }\n            warn(warning);\n        },\n    };\n    const outputOptions = {\n        dir: destLoc,\n        format: 'esm',\n        sourcemap: (sourceMap !== null && sourceMap !== void 0 ? sourceMap : isOptimized),\n        exports: 'named',\n        chunkFileNames: 'common/[name]-[hash].js',\n    };\n    if (Object.keys(installEntrypoints).length > 0) {\n        try {\n            const packageBundle = await rollup(inputOptions);\n            await packageBundle.write(outputOptions);\n        }\n        catch (err) {\n            const { loc } = err;\n            if (!loc || !loc.file) {\n                throw err;\n            }\n            // NOTE: Rollup will fail instantly on error. Because of that, we can\n            // only report one error at a time. `err.watchFiles` also exists, but\n            // for now `err.loc.file` has all the information that we need.\n            const failedExtension = path.extname(loc.file);\n            const suggestion = MISSING_PLUGIN_SUGGESTIONS[failedExtension];\n            if (!suggestion) {\n                throw err;\n            }\n            // Display posix-style on all environments, mainly to help with CI :)\n            const fileName = loc.file.replace(cwd + path.sep, '').replace(/\\\\/g, '/');\n            logError(`${chalk.bold('snowpack')} could not import ${fileName}. ${suggestion}`);\n            return;\n        }\n    }\n    if (nomodule) {\n        const nomoduleStart = Date.now();\n        function rollupResolutionHelper() {\n            return {\n                name: 'rename-import-plugin',\n                resolveId(source) {\n                    // resolve from import map\n                    if (importMap[source]) {\n                        return importMap[source];\n                    }\n                    // resolve web_modules\n                    if (source.includes('/web_modules/')) {\n                        const suffix = source.split('/web_modules/')[1];\n                        return { id: path.join(destLoc, suffix) };\n                    }\n                    // null means try to resolve as-is\n                    return null;\n                },\n            };\n        }\n        try {\n            const noModuleBundle = await rollup({\n                input: path.resolve(cwd, nomodule),\n                inlineDynamicImports: true,\n                plugins: [...inputOptions.plugins, rollupResolutionHelper()],\n            });\n            await noModuleBundle.write({\n                file: path.resolve(destLoc, nomoduleOutput),\n                format: 'iife',\n                name: 'App',\n            });\n            const nomoduleEnd = Date.now() - nomoduleStart;\n            spinner.info(`${chalk.bold('snowpack')} bundled your application for legacy browsers: ${nomoduleOutput} ${chalk.dim(`[${(nomoduleEnd / 1000).toFixed(2)}s]`)}`);\n        }\n        catch (err) {\n            spinner.warn(`${chalk.bold('snowpack')} encountered an error bundling for legacy browsers: ${err.message}`);\n        }\n    }\n    fs.writeFileSync(path.join(destLoc, 'import-map.json'), JSON.stringify({ imports: importMap }, undefined, 2), { encoding: 'utf8' });\n    Object.entries(assetEntrypoints).forEach(([assetName, assetLoc]) => {\n        mkdirp.sync(path.dirname(`${destLoc}/${assetName}`));\n        fs.copyFileSync(assetLoc, `${destLoc}/${assetName}`);\n    });\n    return true;\n}\nexport async function cli(args) {\n    // parse CLI flags\n    const cliFlags = yargs(args, { array: ['exclude', 'externalPackage'] });\n    // if printing help, stop here\n    if (cliFlags.help) {\n        printHelp();\n        process.exit(0);\n    }\n    // load config\n    const { config, errors } = loadConfig(cliFlags);\n    // handle config errors (if any)\n    if (Array.isArray(errors) && errors.length) {\n        errors.forEach(logError);\n        process.exit(0);\n    }\n    const { installOptions: { clean, dest, exclude, include }, webDependencies, } = config;\n    let pkgManifest;\n    try {\n        pkgManifest = require(path.join(cwd, 'package.json'));\n    }\n    catch (err) {\n        console.log(chalk.red('[ERROR] package.json required but no file was found.'));\n        process.exit(0);\n    }\n    const implicitDependencies = [\n        ...Object.keys(pkgManifest.peerDependencies || {}),\n        ...Object.keys(pkgManifest.dependencies || {}),\n    ];\n    const hasBrowserlistConfig = !!pkgManifest.browserslist ||\n        !!process.env.BROWSERSLIST ||\n        fs.existsSync(path.join(cwd, '.browserslistrc')) ||\n        fs.existsSync(path.join(cwd, 'browserslist'));\n    let isExplicit = false;\n    const installTargets = [];\n    if (webDependencies) {\n        isExplicit = true;\n        installTargets.push(...scanDepList(webDependencies, cwd));\n    }\n    if (include) {\n        isExplicit = true;\n        installTargets.push(...(await scanImports({ include, exclude })));\n    }\n    if (!webDependencies && !include) {\n        installTargets.push(...scanDepList(implicitDependencies, cwd));\n    }\n    if (installTargets.length === 0) {\n        logError('Nothing to install.');\n        return;\n    }\n    if (clean) {\n        rimraf.sync(dest);\n    }\n    spinner.start();\n    const startTime = Date.now();\n    const finalResult = await install(installTargets, { hasBrowserlistConfig, isExplicit }, config).catch(err => {\n        err.loc && console.log('\\n' + chalk.red.bold(`✘ ${err.loc.file}`));\n        throw err;\n    });\n    if (finalResult) {\n        spinner.succeed(chalk.bold(`snowpack`) +\n            ` installed: ` +\n            formatInstallResults(!isExplicit) +\n            '.' +\n            chalk.dim(` [${((Date.now() - startTime) / 1000).toFixed(2)}s]`));\n        if (!!dependencyStats) {\n            console.log(printStats(dependencyStats));\n        }\n    }\n    // If an error happened, set the exit code so that programmatic usage of the CLI knows.\n    // We were seeing race conditions here, so add a little buffer.\n    if (spinnerHasError) {\n        setTimeout(() => {\n            spinner.warn(chalk(`Finished with warnings.`));\n            process.exitCode = 1;\n        }, 20);\n    }\n}\n"],"names":["DEFAULT_CONFIG","dedupe","installOptions","clean","hash","dest","exclude","externalPackage","nomoduleOutput","optimize","remoteUrl","stat","strict","rollup","plugins","configSchema","type","properties","source","dependencies","webDependencies","items","namedExports","additionalProperties","babel","include","nomodule","remotePackage","sourceMap","oneOf","expandCliFlags","flags","normalizeDest","config","path","resolve","process","cwd","loadConfig","cliConfig","explorerSync","cosmiconfigSync","searchPlaces","stopDir","dirname","result","search","isEmpty","merge","errors","validation","validate","allowUnknownAttributes","propertyName","mergedConfig","map","msg","basename","filepath","toString","isTruthy","item","Boolean","resolveDependencyManifest","dep","depManifest","require","paths","err","code","message","includes","fullPath","searchPath","sep","replace","indexOfSearch","lastIndexOf","manifestPath","substring","length","manifestStr","fs","readFileSync","encoding","JSON","parse","MISSING_PLUGIN_SUGGESTIONS","IS_DEEP_PACKAGE_IMPORT","rollupPluginEntrypointAlias","name","resolveId","importer","test","packageScope","packageName","match","packageFullName","manifest","needsAlias","module","posix","join","browser","main","skipSelf","then","resolved","rollupPluginDependencyStats","cb","outputDir","existingFileCache","statsSummary","direct","common","buildExistingFileCache","bundle","fileName","Object","keys","filePath","existsSync","size","statSync","compareDependencies","files","contents","byteLength","gzip","zlib","gzipSync","brotli","brotliCompressSync","delta","generateBundle","options","dir","writeBundle","directDependencies","commonDependencies","assetOrChunk","entries","raw","Buffer","isBuffer","from","startsWith","push","rollupPluginTreeshakeInputs","allImports","installTargetsByFile","inputOptions","input","key","val","filter","imp","specifier","some","all","load","id","fileLoc","treeshakeSummary","reduce","summary","default","namespace","named","uniqueNamedImports","Set","normalizedFileLoc","split","win32","WEB_MODULES_TOKEN","WEB_MODULES_TOKEN_LENGTH","BARE_SPECIFIER_REGEX","HAS_NAMED_IMPORTS_REGEX","SPLIT_NAMED_IMPORTS_REGEX","DEFAULT_IMPORT_REGEX","stripJsExtension","createInstallTarget","removeSpecifierQueryString","queryStringIndex","indexOf","getWebModuleSpecifierFromCode","d","s","e","parseWebModuleSpecifier","cleanedSpecifier","webModulesIndex","resolvedSpecifier","resolvedSpecifierWithoutExtension","validatePackageName","validForNewPackages","parseImportStatement","webModuleSpecifier","importStatement","ss","se","dynamicImport","defaultImport","namespaceImport","namedImports","trim","getInstallTargetsForFile","imports","scanDepList","depList","nodeModulesLoc","nodePath","whitelistItem","glob","hasMagic","sync","nodir","flat","concat","scanImports","initESModuleLexer","includeFiles","ignore","console","warn","endsWith","sort","impA","impB","localeCompare","SIZE_COLUMN_WIDTH","entriesSort","filenameA","filenameB","formatSize","kb","Math","round","floor","color","chalk","padEnd","formatDelta","formatFileInfo","filename","stats","isLastFile","lineGlyph","dim","lineName","fileStat","gzipStat","brotliStat","lineStat","lineDelta","formatFiles","strippedFiles","index","printStats","dependencyStats","output","allDirect","allCommon","maxFileNameLength","max","bold","underline","values","ALWAYS_SHOW_ERRORS","banner","installResults","spinner","ora","spinnerHasError","printHelp","log","generateHashFromFile","targetLoc","_a","longHash","hasha","fromFile","algorithm","slice","formatInstallResults","skipFailures","green","yellow","red","logError","stopAndPersist","symbol","cyan","fail","ErrorWithHint","Error","constructor","hint","PACKAGES_TO_AUTO_DETECT_EXPORTS","detectExports","resolveWebDependency","isExplicit","extname","isJSFile","loc","depManifestLoc","italic","foundEntrypoint","stringify","getWebDependencyName","install","installTargets","hasBrowserlistConfig","isBabel","destLoc","useHash","externalPackages","isOptimized","isStrict","withStats","userDefinedRollup","knownNamedExports","allInstallSpecifiers","installEntrypoints","assetEntrypoints","importMap","installTargetsMap","installSpecifier","targetName","targetType","hashQs","t","text","has","setTimeout","external","rollupPluginReplace","rollupPluginNodeResolve","mainFields","modulesOnly","extensions","preferBuiltins","rollupPluginJson","preferConst","indent","compact","rollupPluginCommonjs","rollupPluginBabel","babelrc","configFile","presets","babelPresetEnv","modules","targets","undefined","rollupPluginTerser","info","onwarn","warning","isNodeBuiltin","outputOptions","format","sourcemap","exports","chunkFileNames","packageBundle","write","file","failedExtension","suggestion","nomoduleStart","Date","now","rollupResolutionHelper","suffix","noModuleBundle","inlineDynamicImports","nomoduleEnd","toFixed","writeFileSync","forEach","assetName","assetLoc","mkdirp","copyFileSync","cli","args","cliFlags","yargs","array","help","exit","Array","isArray","pkgManifest","implicitDependencies","peerDependencies","browserslist","env","BROWSERSLIST","rimraf","start","startTime","finalResult","catch","succeed","exitCode"],"mappings":"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"}